@use "sass:map";
@use "@angular/material" as mat;

// TODO: Separate the create-theme-variables logic into different functions
/// Creates a global variable for the three main hues in a color config
/// An Angular Material color config is composed of three palettes: primary, accent, and warning
/// Result: A total of 9 global variables for each palette
@mixin create-theme-variables($theme, $color-config) {
  @each $palette-name, $palette in $color-config {
    --#{$palette-name}: #{mat.get-color-from-palette($palette, "default")};
    --#{$palette-name}-contrast: #{mat.get-color-from-palette(
        $palette,
        "default-contrast"
      )};

    --#{$palette-name}-dark: #{mat.get-color-from-palette($palette, "lighter")};
    --#{$palette-name}-dark-contrast: #{mat.get-color-from-palette(
        $palette,
        "lighter-contrast"
      )};

    --#{$palette-name}-light: #{mat.get-color-from-palette($palette, "darker")};
    --#{$palette-name}-light-contrast: #{mat.get-color-from-palette(
        $palette,
        "darker-contrast"
      )};
  }

  $isDark: map-get($theme, "is-dark");

  @if $isDark {
    --background: #303030;
    --background-contrast: white;

    --foreground: #424242;
    --foreground-contrast: white;

    --border: #d9e2e8;
  } @else {
    --background: #f1f0f0;
    --background-contrast: rgba(0, 0, 0, 0.87);

    --foreground: white;
    --foreground-contrast: rgba(0, 0, 0, 0.87);

    --border: #d9e2e8;
  }


  // $background-wrapper: map-get($theme, "background");
  // $background: map-get($background-wrapper, "background");
  // --background: #{$background};
  // @if $isDark {
  //   --background-contrast: white;
  // } @else {
  //   --background-contrast: rgba(0, 0, 0, 0.87);
  // }

  // $foreground-wrapper: map-get($theme, "background");
  // $foreground: map-get($foreground-wrapper, "card");
  // --foreground: #{$foreground};
  // @if $isDark {
  //   --foreground-contrast: white;
  // } @else {
  //   --foreground-contrast: rgba(0, 0, 0, 0.87);
  // }
}

@function get-theme-color($color-name) {
  @return var(--#{$color-name});
}

// TODO: Use these stash variables:
/*
--bg-primary: var(--neutral-dark1);
--bg-secondary: var(--neutral-dark2);
--bg-alternate: var(--blue-primary);
--bg-action-primary: var(--blue-primary);
--bg-action-secondary: var(--neutral-dark3);
--bg-action-tertiary: var(--neutral-dark1);
--bg-action-disabled-primary: var(--neutral-dark6);
--bg-positive: var(--green-light);
--bg-negative: var(--red-light);
--bg-warning: var(--gold-light);
--bg-target-primary: var(--neutral-dark7);
--bg-target-secondary: var(--neutral-dark5);
--bg-target-tertiary: var(--neutral-dark3);
--bg-hover-primary: var(--blue-highlight);
--bg-hover-secondary: var(--neutral-dark4);
--bg-hover-tertiary: var(--neutral-dark2);
--bg-accent: var(--blue-primary);
--text-primary: var(--neutral-dark9);
--text-secondary: var(--neutral-dark8);
--text-tertiary: var(--neutral-dark7);
--text-placeholder: var(--neutral-dark6);
--text-disabled: var(--neutral-dark5);
--text-inverted: var(--neutral-dark9);
--text-action-primary: var(--neutral-dark9);
--text-action-secondary: var(--neutral-dark9);
--text-action-tertiary: var(--neutral-dark9);
--text-action-disabled-primary: var(--neutral-dark5);
--text-action-disabled-secondary: var(--neutral-dark1);
--text-positive: var(--green-primary);
--text-negative: var(--red-primary);
--text-warning: var(--gold-primary);
--text-positive-dark: var(--green-dark);
--text-negative-dark: var(--red-dark);
--text-warning-dark: var(--gold-dark);
--border-primary: var(--neutral-dark4);
--border-active: var(--blue-primary);
--border-focused: var(--blue-light);
--shadow-primary: var(undefined);
--shadow-button: var(undefined);
--divider: var(--neutral-dark4);
--icon-default: var(--neutral-dark9);
--icon-active: var(--blue-primary);
--icon-tertiary: var(--neutral-dark7);
--icon-placeholder: var(--neutral-dark6);
--icon-disabled: var(--neutral-dark5);
--icon-inverted: var(--neutral-dark9);
color-scheme: dark;
*/
